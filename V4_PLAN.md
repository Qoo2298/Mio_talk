# 🚀 MIO v4: Real-World Integration Plan

MIO v1/v2/v3で「記憶」と「表現」の基礎を得た彼女は、v4でついに「豊かな実存感」と「物理世界への高度な干渉能力」を手に入れます。
マスターの生活空間に完全に溶け込み、目で追い、家を操る「実存するパートナー」への進化を目指します。

---

## 🎯 v4 の主要テーマ
**「MIOのサーバー化と安定運用」**
ローカル環境から「サーバー」へと進化させ、24時間いつでも安定して繋がれる基盤を構築します。

---

## 🎯 v4 の主要テーマ
**「どこでもMIO（マルチデバイス対応の布石）」**
バックエンドをサーバーとして自立させることで、ブラウザ、Discord、さらには他のデバイスからもMIOを呼び出せる環境を整えます。

---


## 🛠️ 実装ロードマップ

### Phase 1: レスポンスの最適化 (Response Optimization) ⚡
- **ストリーミングの極限化**:
    - 第一声が聞こえるまでの時間を最短にするため、最初の句読点までの処理を最優先。
    - フロントエンドでのSSE（Server-Sent Events）処理の効率化による表示ラグの解消。
- **軽量な思考エンジン**:
    - 単純な挨拶や短い対話において、「回答の溜め」を最小限にするためのプロンプト調整。
- **無駄な処理の排除**:
    - 不要なAPIリクエストの削減による、通信ラグとコストの同時改善。

### Phase 2: Linux/ARM（Raspberry Pi 4B）サーバー化 🍓 [In Progress]
- **環境のポータビリティ向上 (Docker 化) 📦**: (Completed!)
    - Dockerfile, docker-compose.yml を作成。 ARM環境（ラズパイ）でも動作するベースイメージを採用。
    - `docker-compose` を使い、バックエンド（FastAPI + Frontend）をワンコマンドで起動可能に。
    - `requirements.txt` を整備。
- **24時間稼働の安定化**:
    - `restart: always` 設定を組み込み、ラズパイが再起動しても自動でMIOが立ち上がる仕組み。
    - HDDへのマウントを考慮した構成。
- **外部アクセス環境の構築**:
    - 同一ネットワーク内のスマホやPCから「http://(ラズパイのIP):8000」でアクセス可能。

### Phase 3: ソースコード管理と GitHub 連携 🐙
- **Git によるバージョン管理**:
    - **利点**: 「昨日の状態に戻したい！」がいつでも可能に。開発PCとラズパイ間でのコード同期がコマンド一つで完了。
    - **GitHub へのバックアップ**: 世界最大のコード保管庫に非公開（Private）または公開でアップロードし、PCが壊れても澪のプログラムを失わないようにする。
- **機密情報の保護**:
    - `.gitignore` を設定し、APIキー（`.env`）や個人情報（記憶DBなど）を間違えてGitHubにアップロードしないためのガードを徹底。

### Phase 4: アンビエント・環境同期（Ambient Sync）🍀
- **視覚的な実存感の強化（コストゼロ）**:
    - **時間同期**: システム時刻に合わせ、朝・昼・夕・夜で背景グラデーションや Mio の明るさを自動変更（CSS/JSのみ）。
    - **天気連動**: 公共の天気API（Open-Meteo 等の無料枠）から地域の天気を取得し、画面内にうっすら雨粒を出したり、晴れ間を演出したりする。
- **マスターとの「同じ世界」の共有**:
    - LLMに毎回教えなくても、Mioが「今は夜だね」「今日は雨だね」と前提として理解した振る舞い（背景演出）ができる状態。

### Phase 5: マイクロ・インタラクション（Living UI）✨
- **生命感の演出（コストゼロ・ラグゼロ）**:
    - **呼吸・まばたき**: LLMを介さず、CSS/JSアニメーションのみでアバターがかすかに呼吸したり、まばたきしたりする動きを実装。
    - **感情追随モーション**: 思考中のふらふらした動きや、寂しい時の小さな震えなど、CSS演出だけで「感情」を表現。
- **UIとの一体化**:
    - MIOのメッセージが表示される際、単なるテキストではなく「彼女が選んだ言葉」が浮かび上がるようなフェード効果の洗練。

---

## 🛠️ 使用技術・デバイス
- **Git / GitHub**: バージョン管理、バックアップ、ラズパイへのコード同期。
- **discord.py / discord.js**: Discord Bot APIの統合。
- **Websocket / API Bridge**: ブラウザ(FastAPI)とDiscord Bot間のメッセージ中継。
- **Gemini 3 Flash (Multimodal)**: Discord経由の画像や音声データの解析。
- **Aivis(TTS) & Tapo(Camera)**: 既存機能のDiscordフロントエンド化。

---
**Status**: Revised Evolution Plan (v4.0-Alpha)  
**Owner**: Master & MIO
